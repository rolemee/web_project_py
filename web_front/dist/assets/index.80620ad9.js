var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,r=(e,t)=>{for(var o in t||(t={}))a.call(t,o)&&l(e,o,t[o]);if(n)for(var o of n(t))s.call(t,o)&&l(e,o,t[o]);return e};import{m as i,bx as c,a6 as u,ab as d,C as p,ay as m,a$ as f,Z as v,bs as g,aZ as b,c9 as y,a_ as h,ax as E,I as C,aS as x,b as M,R as w,d as T,u as B,s as S,g as k,b1 as I,E as A,bB as R,l as _,bl as L,a0 as O,X as P,bA as j,Y as z,a1 as D,_ as Y,aU as H,o as N,a as V,w as $,q as F,v as K,p as U,n as X,ad as G,D as q,c as Z,r as W,f as J,A as Q,B as ee,F as te,ae as oe,V as ne,ca as ae,az as se,bo as le,cb as re,bu as ie}from"./index.03c48972.js";import{E as ce}from"./el-button.0f152581.js";import{E as ue}from"./el-input.c98f0ce0.js";import{o as de}from"./aria.e9c93023.js";import{o as pe,a as me,E as fe}from"./focus-trap.05b6ecac.js";import{i as ve}from"./validator.2b23f811.js";import{u as ge}from"./index.52c3fe84.js";import{u as be}from"./index.5b3d3b8c.js";import{t as ye}from"./event.69d56c48.js";import{a as he}from"./scroll.aace12bc.js";var Ee=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Ee||{});const Ce=(e,t,o)=>{let n={offsetX:0,offsetY:0};const a=t=>{const o=t.clientX,a=t.clientY,{offsetX:s,offsetY:l}=n,r=e.value.getBoundingClientRect(),i=r.left,c=r.top,u=r.width,p=r.height,m=document.documentElement.clientWidth,f=document.documentElement.clientHeight,v=-i+s,g=-c+l,b=m-i-u+s,y=f-c-p+l,h=t=>{const r=Math.min(Math.max(s+t.clientX-o,v),b),i=Math.min(Math.max(l+t.clientY-a,g),y);n={offsetX:r,offsetY:i},e.value.style.transform=`translate(${d(r)}, ${d(i)})`},E=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",E)},s=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)};i((()=>{c((()=>{o.value?t.value&&e.value&&t.value.addEventListener("mousedown",a):s()}))})),u((()=>{s()}))},xe=e=>{if(p(e)||ye("[useLockscreen]","You need to pass a ref param to this function"),!m||f(document.body,"el-popup-parent--hidden"))return;let t=0,o=!1,n="0",a=0;const s=()=>{h(document.body,"el-popup-parent--hidden"),o&&(document.body.style.paddingRight=n)};v(e,(e=>{if(!e)return void s();o=!f(document.body,"el-popup-parent--hidden"),o&&(n=document.body.style.paddingRight,a=Number.parseInt(g(document.body,"paddingRight"),10)),t=he();const l=document.documentElement.clientHeight<document.body.scrollHeight,r=g(document.body,"overflowY");t>0&&(l||"scroll"===r)&&o&&(document.body.style.paddingRight=`${a+t}px`),b(document.body,"el-popup-parent--hidden")})),y((()=>s()))},Me=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}},we=[],Te=e=>{if(0===we.length)return;const t=we[we.length-1]["_trap-focus-children"];if(t.length>0&&e.code===x.tab){if(1===t.length)return e.preventDefault(),void(document.activeElement!==t[0]&&t[0].focus());const o=e.shiftKey,n=e.target===t[0],a=e.target===t[t.length-1];n&&o&&(e.preventDefault(),t[t.length-1].focus()),a&&!o&&(e.preventDefault(),t[0].focus())}},Be={beforeMount(e){e["_trap-focus-children"]=de(e),we.push(e),we.length<=1&&pe(document,"keydown",Te)},updated(e){C((()=>{e["_trap-focus-children"]=de(e)}))},unmounted(){we.shift(),0===we.length&&me(document,"keydown",Te)}};const Se=T({name:"ElOverlay",props:M({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:w([String,Array,Object])},zIndex:{type:w([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const n=B("overlay"),{onClick:a,onMousedown:s,onMouseup:l}=Me(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?S("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:l},[k(t,"default")],Ee.STYLE|Ee.CLASS|Ee.PROPS,["onClick","onMouseup","onMousedown"]):I("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(t,"default")])}}),ke=T({name:"ElMessageBox",directives:{TrapFocus:Be},components:r({ElButton:ce,ElFocusTrap:fe,ElInput:ue,ElOverlay:Se,ElIcon:A},R),inheritAttrs:!1,props:{buttonSize:{type:String,validator:ve},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:a}=ge(),s=B("message-box"),l=_(!1),{nextZIndex:c}=L(),d=O({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:c()}),m=P((()=>{const e=d.type;return{[s.bm("icon",e)]:e&&j[e]}})),f=be(),g=be(),b=z(P((()=>e.buttonSize)),{prop:!0,form:!0,formItem:!0}),y=P((()=>d.icon||j[d.type]||"")),h=P((()=>!!d.message)),E=_(),x=_(),M=_(),w=_(),T=_(),S=P((()=>d.confirmButtonClass));v((()=>d.inputValue),(async t=>{await C(),"prompt"===e.boxType&&null!==t&&H()}),{immediate:!0}),v((()=>l.value),(t=>{var o,n;t&&("prompt"!==e.boxType&&(d.autofocus?M.value=null!=(n=null==(o=T.value)?void 0:o.$el)?n:E.value:M.value=E.value),d.zIndex=c()),"prompt"===e.boxType&&(t?C().then((()=>{var e;w.value&&w.value.$el&&(d.autofocus?M.value=null!=(e=N())?e:E.value:M.value=E.value)})):(d.editorErrorMessage="",d.validateError=!1))}));const k=P((()=>e.draggable));function I(){l.value&&(l.value=!1,C((()=>{d.action&&n("action",d.action)})))}Ce(E,x,k),i((async()=>{await C(),e.closeOnHashChange&&pe(window,"hashchange",I)})),u((()=>{e.closeOnHashChange&&me(window,"hashchange",I)}));const A=()=>{e.closeOnClickModal&&Y(d.distinguishCancelAndClose?"close":"cancel")},R=Me(A),Y=t=>{var o;("prompt"!==e.boxType||"confirm"!==t||H())&&(d.action=t,d.beforeClose?null==(o=d.beforeClose)||o.call(d,t,d,I):I())},H=()=>{if("prompt"===e.boxType){const e=d.inputPattern;if(e&&!e.test(d.inputValue||""))return d.editorErrorMessage=d.inputErrorMessage||a("el.messagebox.error"),d.validateError=!0,!1;const t=d.inputValidator;if("function"==typeof t){const e=t(d.inputValue);if(!1===e)return d.editorErrorMessage=d.inputErrorMessage||a("el.messagebox.error"),d.validateError=!0,!1;if("string"==typeof e)return d.editorErrorMessage=e,d.validateError=!0,!1}}return d.editorErrorMessage="",d.validateError=!1,!0},N=()=>{const e=w.value.$refs;return e.input||e.textarea},V=()=>{Y("close")};return e.lockScroll&&xe(l),((e,t)=>{let o;v((()=>e.value),(e=>{var n,a;e?(o=document.activeElement,p(t)&&(null==(a=(n=t.value).focus)||a.call(n))):o.focus()}))})(l),$=r({},D(d)),t($,o({ns:s,overlayEvent:R,visible:l,hasMessage:h,typeClass:m,contentId:f,inputId:g,btnSize:b,iconComponent:y,confirmButtonClasses:S,rootRef:E,focusStartRef:M,headerRef:x,inputRef:w,confirmRef:T,doClose:I,handleClose:V,onCloseRequested:()=>{e.closeOnPressEscape&&V()},handleWrapperClick:A,handleInputEnter:e=>{if("textarea"!==d.inputType)return e.preventDefault(),Y("confirm")},handleAction:Y,t:a}));var $}}),Ie=["aria-label","aria-describedby"],Ae=["aria-label"],Re=["id"];var _e=Y(ke,[["render",function(e,t,o,n,a,s){const l=H("el-icon"),r=H("close"),i=H("el-input"),c=H("el-button"),u=H("el-focus-trap"),d=H("el-overlay");return N(),V(oe,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=t=>e.$emit("vanish")),persisted:""},{default:$((()=>[F(S(d,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:$((()=>[U("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:X(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...t)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...t)),onMousedown:t[9]||(t[9]=(...t)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...t)),onMouseup:t[10]||(t[10]=(...t)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...t))},[S(u,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:$((()=>[U("div",{ref:"rootRef",class:X([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:G(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=q((()=>{}),["stop"]))},[null!==e.title&&void 0!==e.title?(N(),Z("div",{key:0,ref:"headerRef",class:X(e.ns.e("header"))},[U("div",{class:X(e.ns.e("title"))},[e.iconComponent&&e.center?(N(),V(l,{key:0,class:X([e.ns.e("status"),e.typeClass])},{default:$((()=>[(N(),V(W(e.iconComponent)))])),_:1},8,["class"])):J("v-if",!0),U("span",null,Q(e.title),1)],2),e.showClose?(N(),Z("button",{key:0,type:"button",class:X(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=ee(q((t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"]))},[S(l,{class:X(e.ns.e("close"))},{default:$((()=>[S(r)])),_:1},8,["class"])],42,Ae)):J("v-if",!0)],2)):J("v-if",!0),U("div",{id:e.contentId,class:X(e.ns.e("content"))},[U("div",{class:X(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(N(),V(l,{key:0,class:X([e.ns.e("status"),e.typeClass])},{default:$((()=>[(N(),V(W(e.iconComponent)))])),_:1},8,["class"])):J("v-if",!0),e.hasMessage?(N(),Z("div",{key:1,class:X(e.ns.e("message"))},[k(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?(N(),V(W(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(N(),V(W(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:$((()=>[te(Q(e.dangerouslyUseHTMLString?"":e.message),1)])),_:1},8,["for"]))]))],2)):J("v-if",!0)],2),F(U("div",{class:X(e.ns.e("input"))},[S(i,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValue=t),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:X({invalid:e.validateError}),onKeydown:ee(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),U("div",{class:X(e.ns.e("errormsg")),style:G({visibility:e.editorErrorMessage?"visible":"hidden"})},Q(e.editorErrorMessage),7)],2),[[K,e.showInput]])],10,Re),U("div",{class:X(e.ns.e("btns"))},[e.showCancelButton?(N(),V(c,{key:0,loading:e.cancelButtonLoading,class:X([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=t=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=ee(q((t=>e.handleAction("cancel")),["prevent"]),["enter"]))},{default:$((()=>[te(Q(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","class","round","size"])):J("v-if",!0),F(S(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:X([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=t=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=ee(q((t=>e.handleAction("confirm")),["prevent"]),["enter"]))},{default:$((()=>[te(Q(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","class","round","disabled","size"]),[[K,e.showConfirmButton]])],2)],6)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Ie)])),_:3},8,["z-index","overlay-class","mask"]),[[K,e.visible]])])),_:3})}],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Le=new Map,Oe=(e,t)=>{const o=document.createElement("div");e.onVanish=()=>{re(null,o),Le.delete(a)},e.onAction=t=>{const o=Le.get(a);let s;s=e.showInput?{value:a.inputValue,action:t}:t,e.callback?e.callback(s,n.proxy):"cancel"===t||"close"===t?e.distinguishCancelAndClose&&"cancel"!==t?o.reject("close"):o.reject("cancel"):o.resolve(s)};const n=((e,t,o=null)=>{const n=I(_e,e);return n.appContext=o,re(n,t),document.body.appendChild(t.firstElementChild),n.component})(e,o,t),a=n.proxy;for(const s in e)ie(e,s)&&!ie(a.$props,s)&&(a[s]=e[s]);return v((()=>a.message),((e,t)=>{ae(e)?n.slots.default=()=>[e]:ae(t)&&!ae(e)&&delete n.slots.default}),{immediate:!0}),a.visible=!0,a};function Pe(e,t=null){if(!m)return Promise.reject();let o;return ne(e)||ae(e)?e={message:e}:o=e.callback,new Promise(((n,a)=>{const s=Oe(e,null!=t?t:Pe._context);Le.set(s,{options:e,callback:o,resolve:n,reject:a})}))}const je={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};["alert","confirm","prompt"].forEach((e=>{Pe[e]=function(e){return(t,o,n,a)=>{let s;return se(o)?(n=o,s=""):s=le(o)?"":o,Pe(Object.assign(r({title:s,message:t,type:""},je[e]),n,{boxType:e}),a)}}(e)})),Pe.close=()=>{Le.forEach(((e,t)=>{t.doClose()})),Le.clear()},Pe._context=null;const ze=Pe;ze.install=e=>{ze._context=e._context,e.config.globalProperties.$msgbox=ze,e.config.globalProperties.$messageBox=ze,e.config.globalProperties.$alert=ze.alert,e.config.globalProperties.$confirm=ze.confirm,e.config.globalProperties.$prompt=ze.prompt};const De=ze;export{Se as E,xe as a,Me as b,De as c,Ce as u};
