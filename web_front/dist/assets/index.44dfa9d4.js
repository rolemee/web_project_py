import{d as a,k as e,l as t,m as s,G as i,E as l,q as n,c as o,p as r,A as d,s as u,w as p,y as c,z as m,H as v,o as g,ad as f,F as b}from"./index.03c48972.js";import{v as h}from"./el-loading.7ea27e0d.js";import{_ as q}from"./index.c3bae937.js";import{_}from"./index.98fb3b7f.js";import{E as x}from"./el-button.0f152581.js";/* empty css                */import{_ as j,a as y}from"./index.5b3d3b8c.js";const S={class:"page-head"},w={class:"title-box",style:{"padding-left":"0"}},z={class:"title"},k={class:"button-box"},I=b(" 关注问题 "),C=b(" 提出问题 "),E={class:"foot-button"},A=b("提交"),L=a({name:"AnswerProblem"});var P=j(Object.assign(L,{setup(a){const b=e(),j=c(),L=m(),P=t({qid:j.params.problemId,title:"",loading:!1,setting:{toolbar:"undo redo | insertdatetime searchreplace | preview"},ext:["jpg","png","jpeg","tif"],content:"",hasStar:!1});function F(){""!==P.value.userId&&L.push({name:"putQuestion"})}function G(a){let e=new RegExp("<.+?>","g");P.value.content=a.replace(e,"")}function H(){b.isLogin?i.post("/api/postanswer",{content:P.value.content,qid:P.value.qid}).then((()=>{v.success("回答提交成功"),L.push({name:"detailProblem",params:{id:P.value.qid}})})):v.error("当前未登录!!请先登录")}function O(){b.isLogin?P.value.hasStar?i.get("/api/removestar",{params:{qid:P.value.qid}}).then((a=>{P.value.hasStar=!P.value.hasStar,v.success(a.message)})):i.get("/api/star",{params:{qid:P.value.qid}}).then((a=>{P.value.hasStar=!P.value.hasStar,v.success(a.message)})):v.error("当前未登录!!请先登录")}return s((()=>{P.value.loading=!0,i.get("api/quizinfo",{params:{qid:P.value.qid,userId:b.account?b.account:""}}).then((a=>{P.value.title=a.data.quiz_list[0].title,P.value.hasStar=a.data.quiz_list[0].is_star,P.value.loading=!1})).catch((()=>{P.value.loading=!1}))})),(a,e)=>{const t=y,s=l,i=x,c=_,m=q,v=h;return n((g(),o("div",null,[r("div",S,[r("div",w,[r("div",z,d(P.value.title),1)]),r("div",k,[u(i,{type:"primary",onClick:O},{default:p((()=>[u(s,{style:f([{"margin-right":"5px","font-size":"large"},P.value.hasStar?"color:red":""])},{default:p((()=>[u(t,{name:"ep:star-filled"})])),_:1},8,["style"]),I])),_:1}),u(i,{onClick:F},{default:p((()=>[u(s,{style:{"margin-right":"5px"}},{default:p((()=>[u(t,{name:"ep:info-filled"})])),_:1}),C])),_:1})])]),u(m,null,{default:p((()=>[u(c,{setting:P.value.setting,"onUpdate:modelValue":G},null,8,["setting"]),r("div",E,[u(i,{type:"primary",plain:"",onClick:H},{default:p((()=>[A])),_:1})])])),_:1})])),[[v,P.value.loading]])}}}),[["__scopeId","data-v-341ddbb9"]]);export{P as default};
