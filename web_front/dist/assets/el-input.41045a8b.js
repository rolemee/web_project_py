var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,r=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(o)for(var a of o(t))l.call(t,a)&&s(e,a,t[a]);return e};import{r as i,d as u,N as p,u as d,a9 as c,O as f,aq as v,b as m,k as y,ar as x,l as b,c as g,h,an as w,m as S,as as $,at as k,au as z,av as E,af as I,w as C,n as P,S as j,ae as O,ak as V,v as F,T as A,o as B,z as M,G as N,F as _,B as R,y as H,C as T,s as W,p as q,q as K,H as L,P as D,aw as U,U as G,ax as X,$ as J,ay as Q,E as Y,I as Z,_ as ee,az as te,aA as ae,j as oe,L as ne}from"./index.48f940ee.js";import{u as le}from"./index.786a6241.js";import{b as se,u as re}from"./el-button.d3031f13.js";function ie(e){return null==e}class ue extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function pe(e,t){throw new ue(`[${e}] ${t}`)}function de(e,t){}const ce="update:modelValue";let fe;const ve=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function me(e,t=1,a){var o;fe||(fe=document.createElement("textarea"),document.body.appendChild(fe));const{paddingSize:n,borderSize:l,boxSizing:s,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:ve.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);fe.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),fe.value=e.value||e.placeholder||"";let i=fe.scrollHeight;const p={};"border-box"===s?i+=l:"content-box"===s&&(i-=n),fe.value="";const d=fe.scrollHeight-n;if(u(t)){let e=d*t;"border-box"===s&&(e=e+n+l),i=Math.max(e,i),p.minHeight=`${e}px`}if(u(a)){let e=d*a;"border-box"===s&&(e=e+n+l),i=Math.min(e,i)}return p.height=`${i}px`,null==(o=fe.parentNode)||o.removeChild(fe),fe=void 0,p}const ye=p({id:{type:String,default:void 0},size:d,disabled:Boolean,modelValue:{type:c([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:c([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:f,default:""},prefixIcon:{type:f,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:c([Object,Array,String]),default:()=>v({})}}),xe={"update:modelValue":e=>m(e),input:e=>m(e),change:e=>m(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},be=["role"],ge=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],he=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];var we;const Se=ne(ee(y((we=r({},{name:"ElInput",inheritAttrs:!1}),t(we,a({props:ye,emits:xe,setup(e,{expose:t,emit:a}){const o=e,n={suffix:"append",prefix:"prepend"},l=oe(),s=x(),u=b(),p=g((()=>{const e={};return"combobox"===o.containerRole&&(e["aria-haspopup"]=s["aria-haspopup"],e["aria-owns"]=s["aria-owns"],e["aria-expanded"]=s["aria-expanded"]),e})),d=le({excludeKeys:g((()=>Object.keys(p.value)))}),{form:c,formItem:f}=se(),{inputId:v}=re(o,{formItemContext:f}),m=h(),y=w(),ee=S("input"),ne=S("textarea"),ue=$(),pe=$(),de=i(!1),ce=i(!1),fe=i(!1),ve=i(!1),ye=i(),xe=$(o.inputStyle),we=g((()=>ue.value||pe.value)),Se=g((()=>{var e;return null!=(e=null==c?void 0:c.statusIcon)&&e})),$e=g((()=>(null==f?void 0:f.validateState)||"")),ke=g((()=>$e.value&&k[$e.value])),ze=g((()=>ve.value?z:E)),Ee=g((()=>[s.style,o.inputStyle])),Ie=g((()=>[o.inputStyle,xe.value,{resize:o.resize}])),Ce=g((()=>ie(o.modelValue)?"":String(o.modelValue))),Pe=g((()=>o.clearable&&!y.value&&!o.readonly&&!!Ce.value&&(de.value||ce.value))),je=g((()=>o.showPassword&&!y.value&&!o.readonly&&!!Ce.value&&(!!Ce.value||de.value))),Oe=g((()=>o.showWordLimit&&!!d.value.maxlength&&("text"===o.type||"textarea"===o.type)&&!y.value&&!o.readonly&&!o.showPassword)),Ve=g((()=>Array.from(Ce.value).length)),Fe=g((()=>!!Oe.value&&Ve.value>Number(d.value.maxlength))),Ae=g((()=>!!u.suffix||!!o.suffixIcon||Pe.value||o.showPassword||Oe.value||!!$e.value&&Se.value)),[Be,Me]=function(e){const t=i();return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t.value={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t.value)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t.value;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(ue);I(pe,(e=>{if(!Oe.value||"both"!==o.resize)return;const t=e[0],{width:a}=t.contentRect;ye.value={right:`calc(100% - ${a+15+6}px)`}}));const Ne=()=>{const{type:e,autosize:t}=o;if(te&&"textarea"===e)if(t){const e=ae(t)?t.minRows:void 0,a=ae(t)?t.maxRows:void 0;xe.value=r({},me(pe.value,e,a))}else xe.value={minHeight:me(pe.value).minHeight}},_e=()=>{const e=we.value;e&&e.value!==Ce.value&&(e.value=Ce.value)},Re=e=>{const{el:t}=l.vnode;if(!t)return;const a=Array.from(t.querySelectorAll(`.${ee.e(e)}`)).find((e=>e.parentNode===t));if(!a)return;const o=n[e];u[o]?a.style.transform=`translateX(${"suffix"===e?"-":""}${t.querySelector(`.${ee.be("group",o)}`).offsetWidth}px)`:a.removeAttribute("style")},He=()=>{Re("prefix"),Re("suffix")},Te=async e=>{Be();let{value:t}=e.target;o.formatter&&(t=o.parser?o.parser(t):t,t=o.formatter(t)),fe.value||t!==Ce.value&&(a("update:modelValue",t),a("input",t),await P(),_e(),Me())},We=e=>{a("change",e.target.value)},qe=e=>{a("compositionstart",e),fe.value=!0},Ke=e=>{var t;a("compositionupdate",e);const o=null==(t=e.target)?void 0:t.value,n=o[o.length-1]||"";fe.value=!(e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e))(n)},Le=e=>{a("compositionend",e),fe.value&&(fe.value=!1,Te(e))},De=()=>{ve.value=!ve.value,Ue()},Ue=async()=>{var e;await P(),null==(e=we.value)||e.focus()},Ge=e=>{de.value=!0,a("focus",e)},Xe=e=>{var t;de.value=!1,a("blur",e),o.validateEvent&&(null==(t=null==f?void 0:f.validate)||t.call(f,"blur").catch((e=>{})))},Je=e=>{ce.value=!1,a("mouseleave",e)},Qe=e=>{ce.value=!0,a("mouseenter",e)},Ye=e=>{a("keydown",e)},Ze=()=>{a("update:modelValue",""),a("change",""),a("clear"),a("input","")};return C((()=>o.modelValue),(()=>{var e;P((()=>Ne())),o.validateEvent&&(null==(e=null==f?void 0:f.validate)||e.call(f,"change").catch((e=>{})))})),C(Ce,(()=>_e())),C((()=>o.type),(async()=>{await P(),_e(),Ne(),He()})),j((async()=>{!o.formatter&&o.parser,_e(),He(),await P(),Ne()})),O((async()=>{await P(),He()})),t({input:ue,textarea:pe,ref:we,textareaStyle:Ie,autosize:V(o,"autosize"),focus:Ue,blur:()=>{var e;return null==(e=we.value)?void 0:e.blur()},select:()=>{var e;null==(e=we.value)||e.select()},clear:Ze,resizeTextarea:Ne}),(e,t)=>F((B(),M("div",U(H(p),{class:["textarea"===e.type?H(ne).b():H(ee).b(),H(ee).m(H(m)),H(ee).is("disabled",H(y)),H(ee).is("exceed",H(Fe)),{[H(ee).b("group")]:e.$slots.prepend||e.$slots.append,[H(ee).bm("group","append")]:e.$slots.append,[H(ee).bm("group","prepend")]:e.$slots.prepend,[H(ee).m("prefix")]:e.$slots.prefix||e.prefixIcon,[H(ee).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[H(ee).bm("suffix","password-clear")]:H(Pe)&&H(je)},e.$attrs.class],style:H(Ee),role:e.containerRole,onMouseenter:Qe,onMouseleave:Je}),[N(" input "),"textarea"!==e.type?(B(),M(_,{key:0},[N(" prepend slot "),e.$slots.prepend?(B(),M("div",{key:0,class:R(H(ee).be("group","prepend"))},[T(e.$slots,"prepend")],2)):N("v-if",!0),W("div",{class:R([H(ee).e("wrapper"),H(ee).is("focus",de.value)])},[N(" prefix slot "),e.$slots.prefix||e.prefixIcon?(B(),M("span",{key:0,class:R(H(ee).e("prefix"))},[W("span",{class:R(H(ee).e("prefix-inner"))},[T(e.$slots,"prefix"),e.prefixIcon?(B(),q(H(D),{key:0,class:R(H(ee).e("icon"))},{default:K((()=>[(B(),q(L(e.prefixIcon)))])),_:1},8,["class"])):N("v-if",!0)],2)],2)):N("v-if",!0),W("input",U({id:H(v),ref_key:"input",ref:ue,class:H(ee).e("inner")},H(d),{type:e.showPassword?ve.value?"text":"password":e.type,disabled:H(y),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:qe,onCompositionupdate:Ke,onCompositionend:Le,onInput:Te,onFocus:Ge,onBlur:Xe,onChange:We,onKeydown:Ye}),null,16,ge),N(" suffix slot "),H(Ae)?(B(),M("span",{key:1,class:R(H(ee).e("suffix"))},[W("span",{class:R(H(ee).e("suffix-inner"))},[H(Pe)&&H(je)&&H(Oe)?N("v-if",!0):(B(),M(_,{key:0},[T(e.$slots,"suffix"),e.suffixIcon?(B(),q(H(D),{key:0,class:R(H(ee).e("icon"))},{default:K((()=>[(B(),q(L(e.suffixIcon)))])),_:1},8,["class"])):N("v-if",!0)],64)),H(Pe)?(B(),q(H(D),{key:1,class:R([H(ee).e("icon"),H(ee).e("clear")]),onMousedown:J(H(Q),["prevent"]),onClick:Ze},{default:K((()=>[G(H(X))])),_:1},8,["class","onMousedown"])):N("v-if",!0),H(je)?(B(),q(H(D),{key:2,class:R([H(ee).e("icon"),H(ee).e("password")]),onClick:De},{default:K((()=>[(B(),q(L(H(ze))))])),_:1},8,["class"])):N("v-if",!0),H(Oe)?(B(),M("span",{key:3,class:R(H(ee).e("count"))},[W("span",{class:R(H(ee).e("count-inner"))},Y(H(Ve))+" / "+Y(H(d).maxlength),3)],2)):N("v-if",!0),H($e)&&H(ke)&&H(Se)?(B(),q(H(D),{key:4,class:R([H(ee).e("icon"),H(ee).e("validateIcon"),H(ee).is("loading","validating"===H($e))])},{default:K((()=>[(B(),q(L(H(ke))))])),_:1},8,["class"])):N("v-if",!0)],2)],2)):N("v-if",!0)],2),N(" append slot "),e.$slots.append?(B(),M("div",{key:1,class:R(H(ee).be("group","append"))},[T(e.$slots,"append")],2)):N("v-if",!0)],64)):(B(),M(_,{key:1},[N(" textarea "),W("textarea",U({id:H(v),ref_key:"textarea",ref:pe,class:H(ne).e("inner")},H(d),{tabindex:e.tabindex,disabled:H(y),readonly:e.readonly,autocomplete:e.autocomplete,style:H(Ie),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:qe,onCompositionupdate:Ke,onCompositionend:Le,onInput:Te,onFocus:Ge,onBlur:Xe,onChange:We,onKeydown:Ye}),null,16,he),H(Oe)?(B(),M("span",{key:0,style:Z(ye.value),class:R(H(ee).e("count"))},Y(H(Ve))+" / "+Y(H(d).maxlength),7)):N("v-if",!0)],64))],16,be)),[[A,"hidden"!==e.type]])}})))),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{Se as E,ce as U,de as d,ie as i,pe as t};
