import{d as a,k as e,l as t,m as s,G as i,E as l,q as n,c as o,p as r,y as u,s as d,w as p,t as c,x as m,H as v,o as g,ad as f,C as b}from"./index.10862972.js";import{v as h}from"./el-loading.3e94a9b8.js";import{_ as q}from"./index.5b797a78.js";import{_}from"./index.6ab35508.js";import{E as x}from"./el-button.b516a904.js";/* empty css                */import{_ as j,a as y}from"./index.8b11fa54.js";const S={class:"page-head"},w={class:"title-box",style:{"padding-left":"0"}},k={class:"title"},z={class:"button-box"},C=b(" 关注问题 "),I=b(" 提出问题 "),E={class:"foot-button"},L=b("提交"),P=a({name:"AnswerProblem"});var A=j(Object.assign(P,{setup(a){const b=e(),j=c(),P=m(),A=t({qid:j.params.problemId,title:"",loading:!1,setting:{toolbar:"undo redo | insertdatetime searchreplace | preview"},ext:["jpg","png","jpeg","tif"],content:"",hasStar:!1});function G(){""!==A.value.userId&&P.push({name:"putQuestion"})}function H(a){let e=new RegExp("<.+?>","g");A.value.content=a.replace(e,"")}function O(){b.isLogin?i.post("/api/postanswer",{content:A.value.content,qid:A.value.qid}).then((()=>{v.success("回答提交成功"),P.push({name:"detailProblem",params:{id:A.value.qid}})})):v.error("当前未登录!!请先登录")}function Q(){b.isLogin?A.value.hasStar?i.get("/api/removestar",{params:{qid:A.value.qid}}).then((a=>{A.value.hasStar=!A.value.hasStar,v.success(a.message)})):i.get("/api/star",{params:{qid:A.value.qid}}).then((a=>{A.value.hasStar=!A.value.hasStar,v.success(a.message)})):v.error("当前未登录!!请先登录")}return s((()=>{A.value.loading=!0,i.get("api/quizinfo",{params:{qid:A.value.qid,userId:b.account?b.account:""}}).then((a=>{A.value.title=a.data.quiz_list[0].title,A.value.hasStar=a.data.quiz_list[0].is_star,A.value.loading=!1})).catch((()=>{A.value.loading=!1}))})),(a,e)=>{const t=y,s=l,i=x,c=_,m=q,v=h;return n((g(),o("div",null,[r("div",S,[r("div",w,[r("div",k,u(A.value.title),1)]),r("div",z,[d(i,{type:"primary",onClick:Q},{default:p((()=>[d(s,{style:f([{"margin-right":"5px","font-size":"large"},A.value.hasStar?"color:red":""])},{default:p((()=>[d(t,{name:"ep:star-filled"})])),_:1},8,["style"]),C])),_:1}),d(i,{onClick:G},{default:p((()=>[d(s,{style:{"margin-right":"5px"}},{default:p((()=>[d(t,{name:"ep:info-filled"})])),_:1}),I])),_:1})])]),d(m,null,{default:p((()=>[d(c,{setting:A.value.setting,"onUpdate:modelValue":H},null,8,["setting"]),r("div",E,[d(i,{type:"primary",plain:"",onClick:O},{default:p((()=>[L])),_:1})])])),_:1})])),[[v,A.value.loading]])}}}),[["__scopeId","data-v-341ddbb9"]]);export{A as default};
