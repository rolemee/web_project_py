import{k as a,R as e,r as t,S as s,a0 as i,P as l,v as n,z as r,s as o,E as d,U as u,q as p,X as c,Y as m,a1 as v,o as g,I as f,D as b}from"./index.4cf3a710.js";import{v as h}from"./el-loading.1d3dcbbe.js";import{_ as q}from"./index.3d958ab4.js";import{_}from"./index.8f633486.js";import{E as x}from"./el-button.cb62e3a3.js";/* empty css                */import{_ as j,a as S}from"./index.eef6a20b.js";const y={class:"page-head"},z={class:"title-box",style:{"padding-left":"0"}},I={class:"title"},k={class:"button-box"},w=b(" 关注问题 "),C=b(" 提出问题 "),E={class:"foot-button"},P=b("提交"),L=a({name:"AnswerProblem"});var R=j(Object.assign(L,{setup(a){const b=e(),j=c(),L=m(),R=t({qid:j.params.problemId,title:"",loading:!1,setting:{toolbar:"undo redo | insertdatetime searchreplace | preview"},ext:["jpg","png","jpeg","tif"],content:"",hasStar:!1});function U(){""!==R.value.userId&&L.push({name:"putQuestion"})}function A(a){let e=new RegExp("<.+?>","g");R.value.content=a.replace(e,"")}function D(){b.isLogin?i.post("/api/postanswer",{content:R.value.content,qid:R.value.qid}).then((()=>{v.success("回答提交成功"),L.push({name:"detailProblem",params:{id:R.value.qid}})})):v.error("当前未登录!!请先登录")}function O(){b.isLogin?R.value.hasStar?i.get("/api/removestar",{params:{qid:R.value.qid}}).then((a=>{R.value.hasStar=!R.value.hasStar,v.success(a.message)})):i.get("/api/star",{params:{qid:R.value.qid}}).then((a=>{R.value.hasStar=!R.value.hasStar,v.success(a.message)})):v.error("当前未登录!!请先登录")}return s((()=>{R.value.loading=!0,i.get("api/quizinfo",{params:{qid:R.value.qid,userId:b.account?b.account:""}}).then((a=>{R.value.title=a.data.quiz_list[0].title,R.value.hasStar=a.data.quiz_list[0].is_star,R.value.loading=!1})).catch((()=>{R.value.loading=!1}))})),(a,e)=>{const t=S,s=l,i=x,c=_,m=q,v=h;return n((g(),r("div",null,[o("div",y,[o("div",z,[o("div",I,d(R.value.title),1)]),o("div",k,[u(i,{type:"primary",onClick:O},{default:p((()=>[u(s,{style:f([{"margin-right":"5px","font-size":"large"},R.value.hasStar?"color:red":""])},{default:p((()=>[u(t,{name:"ep:star-filled"})])),_:1},8,["style"]),w])),_:1}),u(i,{onClick:U},{default:p((()=>[u(s,{style:{"margin-right":"5px"}},{default:p((()=>[u(t,{name:"ep:info-filled"})])),_:1}),C])),_:1})])]),u(m,null,{default:p((()=>[u(c,{setting:R.value.setting,"onUpdate:modelValue":A},null,8,["setting"]),o("div",E,[u(i,{type:"primary",plain:"",onClick:D},{default:p((()=>[P])),_:1})])])),_:1})])),[[v,R.value.loading]])}}}),[["__scopeId","data-v-341ddbb9"]]);export{R as default};
