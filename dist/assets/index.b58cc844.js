var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,r=(e,t)=>{for(var o in t||(t={}))a.call(t,o)&&l(e,o,t[o]);if(n)for(var o of n(t))s.call(t,o)&&l(e,o,t[o]);return e};import{aa as i,S as c,bW as u,ad as d,ah as p,A as f,az as m,a$ as v,w as g,bL as b,aZ as y,bX as h,a_ as E,ay as C,n as x,aS as M,N as w,a9 as T,k as S,m as k,U as B,C as I,b1 as A,P as R,bt as _,r as L,bl as P,ab as O,c as z,bs as j,h as D,K as Y,_ as H,aU as N,o as $,p as V,q as F,v as K,T as U,s as X,B as G,I as q,$ as Z,z as W,H as J,G as Q,E as ee,Z as te,D as oe,aj as ne,b as ae,bY as se,aA as le,bo as re,bZ as ie,b_ as ce}from"./index.48f940ee.js";import{E as ue,a as de}from"./el-button.d3031f13.js";import{t as pe,E as fe}from"./el-input.41045a8b.js";import{o as me}from"./aria.e9c93023.js";import{o as ve,a as ge,E as be}from"./focus-trap.8a3181f4.js";import{u as ye}from"./index.c4d7ad7a.js";import{a as he}from"./scroll.dc71fff6.js";var Ee=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Ee||{});const Ce=(e,t,o)=>{let n={offsetX:0,offsetY:0};const a=t=>{const o=t.clientX,a=t.clientY,{offsetX:s,offsetY:l}=n,r=e.value.getBoundingClientRect(),i=r.left,c=r.top,u=r.width,d=r.height,f=document.documentElement.clientWidth,m=document.documentElement.clientHeight,v=-i+s,g=-c+l,b=f-i-u+s,y=m-c-d+l,h=t=>{const r=Math.min(Math.max(s+t.clientX-o,v),b),i=Math.min(Math.max(l+t.clientY-a,g),y);n={offsetX:r,offsetY:i},e.value.style.transform=`translate(${p(r)}, ${p(i)})`},E=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",E)},s=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",a)};c((()=>{u((()=>{o.value?t.value&&e.value&&t.value.addEventListener("mousedown",a):s()}))})),d((()=>{s()}))},xe=e=>{if(f(e)||pe("[useLockscreen]","You need to pass a ref param to this function"),!m||v(document.body,"el-popup-parent--hidden"))return;let t=0,o=!1,n="0",a=0;const s=()=>{E(document.body,"el-popup-parent--hidden"),o&&(document.body.style.paddingRight=n)};g(e,(e=>{if(!e)return void s();o=!v(document.body,"el-popup-parent--hidden"),o&&(n=document.body.style.paddingRight,a=Number.parseInt(b(document.body,"paddingRight"),10)),t=he();const l=document.documentElement.clientHeight<document.body.scrollHeight,r=b(document.body,"overflowY");t>0&&(l||"scroll"===r)&&o&&(document.body.style.paddingRight=`${a+t}px`),y(document.body,"el-popup-parent--hidden")})),h((()=>s()))},Me=e=>{if(!e)return{onClick:C,onMousedown:C,onMouseup:C};let t=!1,o=!1;return{onClick:n=>{t&&o&&e(n),t=o=!1},onMousedown:e=>{t=e.target===e.currentTarget},onMouseup:e=>{o=e.target===e.currentTarget}}},we=[],Te=e=>{if(0===we.length)return;const t=we[we.length-1]["_trap-focus-children"];if(t.length>0&&e.code===M.tab){if(1===t.length)return e.preventDefault(),void(document.activeElement!==t[0]&&t[0].focus());const o=e.shiftKey,n=e.target===t[0],a=e.target===t[t.length-1];n&&o&&(e.preventDefault(),t[t.length-1].focus()),a&&!o&&(e.preventDefault(),t[0].focus())}},Se={beforeMount(e){e["_trap-focus-children"]=me(e),we.push(e),we.length<=1&&ve(document,"keydown",Te)},updated(e){x((()=>{e["_trap-focus-children"]=me(e)}))},unmounted(){we.shift(),0===we.length&&ge(document,"keydown",Te)}};const ke=S({name:"ElOverlay",props:w({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:T([String,Array,Object])},zIndex:{type:T([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:t,emit:o}){const n=k("overlay"),{onClick:a,onMousedown:s,onMouseup:l}=Me(e.customMaskEvent?void 0:e=>{o("click",e)});return()=>e.mask?B("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:s,onMouseup:l},[I(t,"default")],Ee.STYLE|Ee.CLASS|Ee.PROPS,["onClick","onMouseup","onMousedown"]):A("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[I(t,"default")])}}),Be=S({name:"ElMessageBox",directives:{TrapFocus:Se},components:r({ElButton:ue,ElFocusTrap:be,ElInput:fe,ElOverlay:ke,ElIcon:R},_),inheritAttrs:!1,props:{buttonSize:{type:String,validator:e=>["",...i].includes(e)},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:a}=ye(),s=k("message-box"),l=L(!1),{nextZIndex:i}=P(),u=O({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:i()}),p=z((()=>{const e=u.type;return{[s.bm("icon",e)]:e&&j[e]}})),m=de(),v=de(),b=D(z((()=>e.buttonSize)),{prop:!0,form:!0,formItem:!0}),y=z((()=>u.icon||j[u.type]||"")),h=z((()=>!!u.message)),E=L(),C=L(),M=L(),w=L(),T=L(),S=z((()=>u.confirmButtonClass));g((()=>u.inputValue),(async t=>{await x(),"prompt"===e.boxType&&null!==t&&H()}),{immediate:!0}),g((()=>l.value),(t=>{var o,n;t&&("prompt"!==e.boxType&&(u.autofocus?M.value=null!=(n=null==(o=T.value)?void 0:o.$el)?n:E.value:M.value=E.value),u.zIndex=i()),"prompt"===e.boxType&&(t?x().then((()=>{var e;w.value&&w.value.$el&&(u.autofocus?M.value=null!=(e=N())?e:E.value:M.value=E.value)})):(u.editorErrorMessage="",u.validateError=!1))}));const B=z((()=>e.draggable));function I(){l.value&&(l.value=!1,x((()=>{u.action&&n("action",u.action)})))}Ce(E,C,B),c((async()=>{await x(),e.closeOnHashChange&&ve(window,"hashchange",I)})),d((()=>{e.closeOnHashChange&&ge(window,"hashchange",I)}));const A=()=>{e.closeOnClickModal&&_(u.distinguishCancelAndClose?"close":"cancel")},R=Me(A),_=t=>{var o;("prompt"!==e.boxType||"confirm"!==t||H())&&(u.action=t,u.beforeClose?null==(o=u.beforeClose)||o.call(u,t,u,I):I())},H=()=>{if("prompt"===e.boxType){const e=u.inputPattern;if(e&&!e.test(u.inputValue||""))return u.editorErrorMessage=u.inputErrorMessage||a("el.messagebox.error"),u.validateError=!0,!1;const t=u.inputValidator;if("function"==typeof t){const e=t(u.inputValue);if(!1===e)return u.editorErrorMessage=u.inputErrorMessage||a("el.messagebox.error"),u.validateError=!0,!1;if("string"==typeof e)return u.editorErrorMessage=e,u.validateError=!0,!1}}return u.editorErrorMessage="",u.validateError=!1,!0},N=()=>{const e=w.value.$refs;return e.input||e.textarea},$=()=>{_("close")};return e.lockScroll&&xe(l),((e,t)=>{let o;g((()=>e.value),(e=>{var n,a;e?(o=document.activeElement,f(t)&&(null==(a=(n=t.value).focus)||a.call(n))):o.focus()}))})(l),V=r({},Y(u)),t(V,o({ns:s,overlayEvent:R,visible:l,hasMessage:h,typeClass:p,contentId:m,inputId:v,btnSize:b,iconComponent:y,confirmButtonClasses:S,rootRef:E,focusStartRef:M,headerRef:C,inputRef:w,confirmRef:T,doClose:I,handleClose:$,onCloseRequested:()=>{e.closeOnPressEscape&&$()},handleWrapperClick:A,handleInputEnter:e=>{if("textarea"!==u.inputType)return e.preventDefault(),_("confirm")},handleAction:_,t:a}));var V}}),Ie=["aria-label","aria-describedby"],Ae=["aria-label"],Re=["id"];var _e=H(Be,[["render",function(e,t,o,n,a,s){const l=N("el-icon"),r=N("close"),i=N("el-input"),c=N("el-button"),u=N("el-focus-trap"),d=N("el-overlay");return $(),V(ne,{name:"fade-in-linear",onAfterLeave:t[11]||(t[11]=t=>e.$emit("vanish")),persisted:""},{default:F((()=>[K(B(d,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:F((()=>[X("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:G(`${e.ns.namespace.value}-overlay-message-box`),onClick:t[8]||(t[8]=(...t)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...t)),onMousedown:t[9]||(t[9]=(...t)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...t)),onMouseup:t[10]||(t[10]=(...t)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...t))},[B(u,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:F((()=>[X("div",{ref:"rootRef",class:G([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:q(e.customStyle),tabindex:"-1",onClick:t[7]||(t[7]=Z((()=>{}),["stop"]))},[null!==e.title&&void 0!==e.title?($(),W("div",{key:0,ref:"headerRef",class:G(e.ns.e("header"))},[X("div",{class:G(e.ns.e("title"))},[e.iconComponent&&e.center?($(),V(l,{key:0,class:G([e.ns.e("status"),e.typeClass])},{default:F((()=>[($(),V(J(e.iconComponent)))])),_:1},8,["class"])):Q("v-if",!0),X("span",null,ee(e.title),1)],2),e.showClose?($(),W("button",{key:0,type:"button",class:G(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:t[0]||(t[0]=t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:t[1]||(t[1]=te(Z((t=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),["prevent"]),["enter"]))},[B(l,{class:G(e.ns.e("close"))},{default:F((()=>[B(r)])),_:1},8,["class"])],42,Ae)):Q("v-if",!0)],2)):Q("v-if",!0),X("div",{id:e.contentId,class:G(e.ns.e("content"))},[X("div",{class:G(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?($(),V(l,{key:0,class:G([e.ns.e("status"),e.typeClass])},{default:F((()=>[($(),V(J(e.iconComponent)))])),_:1},8,["class"])):Q("v-if",!0),e.hasMessage?($(),W("div",{key:1,class:G(e.ns.e("message"))},[I(e.$slots,"default",{},(()=>[e.dangerouslyUseHTMLString?($(),V(J(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):($(),V(J(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:F((()=>[oe(ee(e.dangerouslyUseHTMLString?"":e.message),1)])),_:1},8,["for"]))]))],2)):Q("v-if",!0)],2),K(X("div",{class:G(e.ns.e("input"))},[B(i,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValue=t),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:G({invalid:e.validateError}),onKeydown:te(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),X("div",{class:G(e.ns.e("errormsg")),style:q({visibility:e.editorErrorMessage?"visible":"hidden"})},ee(e.editorErrorMessage),7)],2),[[U,e.showInput]])],10,Re),X("div",{class:G(e.ns.e("btns"))},[e.showCancelButton?($(),V(c,{key:0,loading:e.cancelButtonLoading,class:G([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:t[3]||(t[3]=t=>e.handleAction("cancel")),onKeydown:t[4]||(t[4]=te(Z((t=>e.handleAction("cancel")),["prevent"]),["enter"]))},{default:F((()=>[oe(ee(e.cancelButtonText||e.t("el.messagebox.cancel")),1)])),_:1},8,["loading","class","round","size"])):Q("v-if",!0),K(B(c,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:G([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:t[5]||(t[5]=t=>e.handleAction("confirm")),onKeydown:t[6]||(t[6]=te(Z((t=>e.handleAction("confirm")),["prevent"]),["enter"]))},{default:F((()=>[oe(ee(e.confirmButtonText||e.t("el.messagebox.confirm")),1)])),_:1},8,["loading","class","round","disabled","size"]),[[U,e.showConfirmButton]])],2)],6)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,Ie)])),_:3},8,["z-index","overlay-class","mask"]),[[U,e.visible]])])),_:3})}],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Le=new Map,Pe=(e,t)=>{const o=document.createElement("div");e.onVanish=()=>{ie(null,o),Le.delete(a)},e.onAction=t=>{const o=Le.get(a);let s;s=e.showInput?{value:a.inputValue,action:t}:t,e.callback?e.callback(s,n.proxy):"cancel"===t||"close"===t?e.distinguishCancelAndClose&&"cancel"!==t?o.reject("close"):o.reject("cancel"):o.resolve(s)};const n=((e,t,o=null)=>{const n=A(_e,e);return n.appContext=o,ie(n,t),document.body.appendChild(t.firstElementChild),n.component})(e,o,t),a=n.proxy;for(const s in e)ce(e,s)&&!ce(a.$props,s)&&(a[s]=e[s]);return g((()=>a.message),((e,t)=>{se(e)?n.slots.default=()=>[e]:se(t)&&!se(e)&&delete n.slots.default}),{immediate:!0}),a.visible=!0,a};function Oe(e,t=null){if(!m)return Promise.reject();let o;return ae(e)||se(e)?e={message:e}:o=e.callback,new Promise(((n,a)=>{const s=Pe(e,null!=t?t:Oe._context);Le.set(s,{options:e,callback:o,resolve:n,reject:a})}))}const ze={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};["alert","confirm","prompt"].forEach((e=>{Oe[e]=function(e){return(t,o,n,a)=>{let s;return le(o)?(n=o,s=""):s=re(o)?"":o,Oe(Object.assign(r({title:s,message:t,type:""},ze[e]),n,{boxType:e}),a)}}(e)})),Oe.close=()=>{Le.forEach(((e,t)=>{t.doClose()})),Le.clear()},Oe._context=null;const je=Oe;je.install=e=>{je._context=e._context,e.config.globalProperties.$msgbox=je,e.config.globalProperties.$messageBox=je,e.config.globalProperties.$alert=je.alert,e.config.globalProperties.$confirm=je.confirm,e.config.globalProperties.$prompt=je.prompt};const De=je;export{De as E,xe as a,Me as b,ke as c,Ce as u};
