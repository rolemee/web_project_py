import{_ as e}from"./index.3d958ab4.js";import{k as a,R as t,r as l,z as s,U as o,q as i,Y as n,o as r,s as p,V as u,W as d,D as c,a1 as m,bJ as f,a0 as g}from"./index.4cf3a710.js";import{E as v}from"./el-button.cb62e3a3.js";import{_ as b}from"./index.8f633486.js";import{E as x}from"./el-input.09a5a42a.js";import{_ as h}from"./index.eef6a20b.js";import{E as j}from"./index.dbd091da.js";/* empty css                */import"./index.126dd3d4.js";import"./aria.e9c93023.js";import"./focus-trap.3b4ae032.js";import"./index.a83b8071.js";import"./scroll.40f3f837.js";const y=e=>(u("data-v-473ee2e8"),e=e(),d(),e),w=y((()=>p("div",{class:"title"}," 描述您的问题 ",-1))),z=y((()=>p("i",{style:{color:"red","font-size":"15px","margin-right":"5px"}},"*",-1))),D=y((()=>p("span",{style:{"font-weight":"bold","font-size":"16px"}},"问题描述",-1))),U=y((()=>p("span",{style:{"font-size":"12px",color:"#8a8f97"}},"（必填）",-1))),V={style:{"margin-left":"10px"}},E=y((()=>p("span",{style:{"font-weight":"bold","font-size":"14px",color:"#8a8f97"}},"问题补充说明:",-1))),_={style:{"margin-left":"10px"}},R=y((()=>p("i",{style:{color:"red","font-size":"15px","margin-right":"5px"}},"*",-1))),k=y((()=>p("span",{style:{"font-weight":"bold","font-size":"16px"}},"问题标签",-1))),C={class:"foot-button"},L=c("提交"),q=a({name:"PutQuestion"});var B=h(Object.assign(q,{setup(a){const u=t(),d=n(),c=l({labelData:"",title:"",ext:["jpg","png","jpeg","tif"],content:""}),h=l(!0);function y(){h.value&&(j.confirm('标签输入的格式为<span style="color:red;font-size: large">每个标签之间以空格分离</span><div style="color: #909399">合适标签可以提高回答的专业率<br>让你的问题被更多人看到</div>',"提示",{type:"success",showCancelButton:!1,showConfirmButton:!1,dangerouslyUseHTMLString:!0}).catch((()=>{h.value=!1})),h.value=!1)}function q(e){let a;if(new RegExp("img").test(e)){let t=new RegExp("/","g");a=e.replace(t,"\\\\/").replace(/"/g,"\\\\x22")}else{let t=new RegExp("<.+?>","g");a=e.replace(t,"")}c.value.content+=a}function B(e,a){var t;u.isLogin?(t=e.filename,new Promise(((e,a)=>{const l=t().split("."),s=l[l.length-1];-1!==c.value.ext.indexOf(s)?e():(m.error(`图片上传只支持${c.value.ext.join("/")}格式`),a())}))).then((()=>{let t=new FormData;t.append("file",e.blob(),e.filename()),f({baseURL:"http://121.5.161.87:8888/",url:"/api/uploadfile",method:"post",headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+u.token},data:t}).then((e=>{if(200===e.status)if(200===e.data.code){let t="http://121.5.161.87:8888/"+e.data.data.imageurl.replace("/","");a({imageUrl:t,status:200})}else"未检测到token"===e.data.message?m.error("登录信息已过期, 请重新登录"):m.error(e.data.message)})).catch((e=>{a({status:404})}))})):m.error("当前未登录!!请先登录")}function P(){if(u.isLogin)if(c.value.title&&c.value.labelData){let e=new RegExp(" ","g");c.value.labelData=c.value.labelData.trim().replace(e,","),g.post("/api/postquiz",{title:c.value.title,content:c.value.content?c.value.content:" ",keywords:c.value.labelData}).then((e=>{m.success("提问提交成功"),d.push({name:"detailProblem",params:{id:e.data.qid}})}))}else c.value.title?m.success("提问时关键字不能为空,输入关键字可以得到更精准的回答哦"):m.success("提问时标题不能为空");else m.error("当前未登录!!请先登录")}return(a,t)=>{const l=x,n=b,u=v,d=e;return r(),s("div",null,[o(d,null,{default:i((()=>[w,p("div",null,[z,D,U,o(l,{modelValue:c.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value.title=e),clearable:"",class:"input-title",placeholder:"一句话描述你的问题"},null,8,["modelValue"])]),p("div",V,[E,o(n,{style:{margin:"10px"},"onUpdate:modelValue":q,onUploadImage:B})]),p("div",_,[R,k,o(l,{modelValue:c.value.labelData,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value.labelData=e),clearable:"",class:"input-title",placeholder:"输入标签 每个标签以空格隔开",onFocus:y},null,8,["modelValue"])]),p("div",C,[o(u,{type:"primary",plain:"",onClick:P},{default:i((()=>[L])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-473ee2e8"]]);export{B as default};
