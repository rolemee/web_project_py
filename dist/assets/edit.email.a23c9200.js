import{_ as e,a}from"./index.6bfeed20.js";import{_ as l}from"./index.3d958ab4.js";import{k as t,X as r,Y as s,R as o,r as u,o as i,z as m,U as d,q as n,D as p,E as c,a1 as f,P as v,j as b}from"./index.4cf3a710.js";import{E as g,a as _}from"./el-col.5c96ccd8.js";import{E as h,a as j}from"./el-form-item.5011a6b3.js";import{E as x}from"./el-input.09a5a42a.js";import{E as y}from"./el-button.cb62e3a3.js";/* empty css                */import{a as E}from"./index.eef6a20b.js";import{b as k}from"./route-block.89f12ae7.js";import"./isEqual.584f7027.js";import"./index.126dd3d4.js";const V=p(" 返回 "),q=p("取消"),z=p("提交"),C=t({name:"PersonalEditEmail"}),P=Object.assign(C,{setup(t){const k=r(),C=s(),{proxy:P}=b(),w=o(),R=u({email:"",captcha:""}),U=u({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",trigger:"blur",message:"请输入正确的邮箱格式"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"},{min:4,max:4,trigger:"blur",message:"验证码长度必须为4位"}]}),I=u(!1),D="{{time}}s后重新获取";let O=u(20);const S=u("发送验证码");function X(){O.value=20,S.value=D.replace("{{time}}",O.value);let e=setInterval((()=>{O.value--,O.value<=0?(S.value="发送验证码",clearInterval(e),I.value=!1):S.value=D.replace("{{time}}",O.value)}),1e3)}function Y(){P.$refs.formRef.validate((e=>{e&&w.editPassword(R.value).then((()=>{f({type:"success",message:"模拟修改成功，请重新登录"}),w.logout().then((()=>{C.push({name:"login",query:{redirect:k.fullPath}})}))})).catch((()=>{}))}))}function $(){C.push({name:"personalSetting"})}return(t,r)=>{const s=E,o=v,u=y,f=e,b=x,k=h,C=j,P=g,w=_,D=l,O=a;return i(),m("div",null,[d(f,{title:"修改邮箱",content:"绑定邮箱可以提高帐号安全性噢~"},{default:n((()=>[d(u,{size:"default",round:"",onClick:$},{icon:n((()=>[d(o,null,{default:n((()=>[d(s,{name:"ep:arrow-left"})])),_:1})])),default:n((()=>[V])),_:1})])),_:1}),d(D,null,{default:n((()=>[d(w,null,{default:n((()=>[d(P,{md:24,lg:12},{default:n((()=>[d(C,{ref:"formRef",model:R.value,rules:U.value,"label-width":"120px"},{default:n((()=>[d(k,{label:"邮箱",prop:"email"},{default:n((()=>[d(b,{modelValue:R.value.email,"onUpdate:modelValue":r[0]||(r[0]=e=>R.value.email=e),type:"text",placeholder:"请输入邮箱号"},null,8,["modelValue"])])),_:1}),d(k,{label:"验证码",prop:"captcha"},{default:n((()=>[d(b,{ref:"captcha",modelValue:R.value.captcha,"onUpdate:modelValue":r[1]||(r[1]=e=>R.value.captcha=e),type:"text",autocomplete:"on",placeholder:"请输入验证码"},{append:n((()=>[d(u,{disabled:I.value,onClick:X},{default:n((()=>[p(c(S.value),1)])),_:1},8,["disabled"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1}),d(O,null,{default:n((()=>[d(u,{size:"large",onClick:$},{default:n((()=>[q])),_:1}),d(u,{type:"primary",size:"large",onClick:Y},{default:n((()=>[z])),_:1})])),_:1})])}}});"function"==typeof k&&k(P);export{P as default};
