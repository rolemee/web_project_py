var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,s=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&r(e,n,t[n]);if(o)for(var n of o(t))a.call(t,n)&&r(e,n,t[n]);return e},i=(e,o)=>t(e,n(o));import{K as u,m as c,r as d,ab as v,bK as b,a_ as g,b1 as m,q as f,v as p,T as y,U as x,aj as w,az as C,n as k,b as L,bl as A,bL as O,aZ as h,aA as P,bM as j,A as $}from"./index.48f940ee.js";let B;const V=function(e={}){if(!C)return;const t=E(e);if(t.fullscreen&&B)return B;const n=function(e){let t;const n=c("loading"),o=d(!1),l=v(i(s({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function a(){const e=l.parent;if(!e.vLoadingAddClassList){let t=e.getAttribute("loading-number");t=Number.parseInt(t)-1,t?e.setAttribute("loading-number",t.toString()):(g(e,n.bm("parent","relative")),e.removeAttribute("loading-number")),g(e,n.bm("parent","hidden"))}r(),k.unmount()}function r(){var e,t;null==(t=null==(e=L.$el)?void 0:e.parentNode)||t.removeChild(L.$el)}function C(){o.value&&(o.value=!1,a())}const k=b({name:"ElLoading",setup:()=>()=>{const e=l.spinner||l.svg,t=m("svg",s({class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[m("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),o=l.text?m("p",{class:n.b("text")},[l.text]):void 0;return m(w,{name:n.b("fade"),onAfterLeave:C},{default:f((()=>[p(x("div",{style:{backgroundColor:l.background||""},class:[n.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[m("div",{class:n.b("spinner")},[t,o])]),[[y,l.visible]])]))})}}),L=k.mount(document.createElement("div"));return i(s({},u(l)),{setText:function(e){l.text=e},removeElLoadingChild:r,close:function(){var n;e.beforeClose&&!e.beforeClose()||(l.parent.vLoadingAddClassList=void 0,o.value=!0,clearTimeout(t),t=window.setTimeout((()=>{o.value&&(o.value=!1,a())}),400),l.visible=!1,null==(n=e.closed)||n.call(e))},handleAfterLeave:C,vm:L,get $el(){return L.$el}})}(i(s({},t),{closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(B=void 0)}}));I(t,t.parent,n),T(t,t.parent,n),t.parent.vLoadingAddClassList=()=>T(t,t.parent,n);let o=t.parent.getAttribute("loading-number");return o=o?`${Number.parseInt(o)+1}`:"1",t.parent.setAttribute("loading-number",o),t.parent.appendChild(n.$el),k((()=>n.visible.value=t.visible)),t.fullscreen&&(B=n),n},E=e=>{var t,n,o,l;let a;return a=L(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:a===document.body||e.body?document.body:a,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:a===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(o=e.lock)&&o,customClass:e.customClass||"",visible:null==(l=e.visible)||l,target:a}},I=async(e,t,n)=>{const{nextZIndex:o}=A(),l={};if(e.fullscreen)n.originalPosition.value=O(document.body,"position"),n.originalOverflow.value=O(document.body,"overflow"),l.zIndex=o();else if(e.parent===document.body){n.originalPosition.value=O(document.body,"position"),await k();for(const t of["top","left"]){const n="top"===t?"scrollTop":"scrollLeft";l[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-Number.parseInt(O(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])l[t]=`${e.target.getBoundingClientRect()[t]}px`}else n.originalPosition.value=O(t,"position");for(const[a,r]of Object.entries(l))n.$el.style[a]=r},T=(e,t,n)=>{const o=c("loading");"absolute"!==n.originalPosition.value&&"fixed"!==n.originalPosition.value?h(t,o.bm("parent","relative")):g(t,o.bm("parent","relative")),e.fullscreen&&e.lock?h(t,o.bm("parent","hidden")):g(t,o.bm("parent","hidden"))},N=Symbol("ElLoading"),S=(e,t)=>{var n,o,l,a;const r=t.instance,s=e=>P(t.value)?t.value[e]:void 0,i=t=>(e=>{const t=L(e)&&(null==r?void 0:r[e])||e;return t?d(t):t})(s(t)||e.getAttribute(`element-loading-${j(t)}`)),u=null!=(n=s("fullscreen"))?n:t.modifiers.fullscreen,c={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:u,target:null!=(o=s("target"))?o:u?void 0:e,body:null!=(l=s("body"))?l:t.modifiers.body,lock:null!=(a=s("lock"))?a:t.modifiers.lock};e[N]={options:c,instance:V(c)}},q={mounted(e,t){t.value&&S(e,t)},updated(e,t){const n=e[N];t.oldValue!==t.value&&(t.value&&!t.oldValue?S(e,t):t.value&&t.oldValue?P(t.value)&&((e,t)=>{for(const n of Object.keys(t))$(t[n])&&(t[n].value=e[n])})(t.value,n.options):null==n||n.instance.close())},unmounted(e){var t;null==(t=e[N])||t.instance.close()}};export{q as v};
