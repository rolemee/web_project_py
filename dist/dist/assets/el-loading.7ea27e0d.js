var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,r=(e,t)=>{for(var n in t||(t={}))l.call(t,n)&&s(e,n,t[n]);if(o)for(var n of o(t))a.call(t,n)&&s(e,n,t[n]);return e},i=(e,o)=>t(e,n(o));import{a1 as u,u as c,l as d,a0 as v,br as b,a_ as g,b1 as m,w as p,q as f,v as y,s as x,ae as w,ay as C,I as k,V as L,bl as O,bs as h,aZ as A,az as P,bt as V,C as $}from"./index.03c48972.js";let j;const B=function(e={}){if(!C)return;const t=I(e);if(t.fullscreen&&j)return j;const n=function(e){let t;const n=c("loading"),o=d(!1),l=v(i(r({},e),{originalPosition:"",originalOverflow:"",visible:!1}));function a(){const e=l.parent;if(!e.vLoadingAddClassList){let t=e.getAttribute("loading-number");t=Number.parseInt(t)-1,t?e.setAttribute("loading-number",t.toString()):(g(e,n.bm("parent","relative")),e.removeAttribute("loading-number")),g(e,n.bm("parent","hidden"))}s(),k.unmount()}function s(){var e,t;null==(t=null==(e=L.$el)?void 0:e.parentNode)||t.removeChild(L.$el)}function C(){o.value&&(o.value=!1,a())}const k=b({name:"ElLoading",setup:()=>()=>{const e=l.spinner||l.svg,t=m("svg",r({class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"25 25 50 50"},e?{innerHTML:e}:{}),[m("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none"})]),o=l.text?m("p",{class:n.b("text")},[l.text]):void 0;return m(w,{name:n.b("fade"),onAfterLeave:C},{default:p((()=>[f(x("div",{style:{backgroundColor:l.background||""},class:[n.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[m("div",{class:n.b("spinner")},[t,o])]),[[y,l.visible]])]))})}}),L=k.mount(document.createElement("div"));return i(r({},u(l)),{setText:function(e){l.text=e},removeElLoadingChild:s,close:function(){var n;e.beforeClose&&!e.beforeClose()||(l.parent.vLoadingAddClassList=void 0,o.value=!0,clearTimeout(t),t=window.setTimeout((()=>{o.value&&(o.value=!1,a())}),400),l.visible=!1,null==(n=e.closed)||n.call(e))},handleAfterLeave:C,vm:L,get $el(){return L.$el}})}(i(r({},t),{closed:()=>{var e;null==(e=t.closed)||e.call(t),t.fullscreen&&(j=void 0)}}));E(t,t.parent,n),T(t,t.parent,n),t.parent.vLoadingAddClassList=()=>T(t,t.parent,n);let o=t.parent.getAttribute("loading-number");return o=o?`${Number.parseInt(o)+1}`:"1",t.parent.setAttribute("loading-number",o),t.parent.appendChild(n.$el),k((()=>n.visible.value=t.visible)),t.fullscreen&&(j=n),n},I=e=>{var t,n,o,l;let a;return a=L(e.target)?null!=(t=document.querySelector(e.target))?t:document.body:e.target||document.body,{parent:a===document.body||e.body?document.body:a,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:a===document.body&&(null==(n=e.fullscreen)||n),lock:null!=(o=e.lock)&&o,customClass:e.customClass||"",visible:null==(l=e.visible)||l,target:a}},E=async(e,t,n)=>{const{nextZIndex:o}=O(),l={};if(e.fullscreen)n.originalPosition.value=h(document.body,"position"),n.originalOverflow.value=h(document.body,"overflow"),l.zIndex=o();else if(e.parent===document.body){n.originalPosition.value=h(document.body,"position"),await k();for(const t of["top","left"]){const n="top"===t?"scrollTop":"scrollLeft";l[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-Number.parseInt(h(document.body,`margin-${t}`),10)+"px"}for(const t of["height","width"])l[t]=`${e.target.getBoundingClientRect()[t]}px`}else n.originalPosition.value=h(t,"position");for(const[a,s]of Object.entries(l))n.$el.style[a]=s},T=(e,t,n)=>{const o=c("loading");"absolute"!==n.originalPosition.value&&"fixed"!==n.originalPosition.value?A(t,o.bm("parent","relative")):g(t,o.bm("parent","relative")),e.fullscreen&&e.lock?A(t,o.bm("parent","hidden")):g(t,o.bm("parent","hidden"))},N=Symbol("ElLoading"),S=(e,t)=>{var n,o,l,a;const s=t.instance,r=e=>P(t.value)?t.value[e]:void 0,i=t=>(e=>{const t=L(e)&&(null==s?void 0:s[e])||e;return t?d(t):t})(r(t)||e.getAttribute(`element-loading-${V(t)}`)),u=null!=(n=r("fullscreen"))?n:t.modifiers.fullscreen,c={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:u,target:null!=(o=r("target"))?o:u?void 0:e,body:null!=(l=r("body"))?l:t.modifiers.body,lock:null!=(a=r("lock"))?a:t.modifiers.lock};e[N]={options:c,instance:B(c)}},q={mounted(e,t){t.value&&S(e,t)},updated(e,t){const n=e[N];t.oldValue!==t.value&&(t.value&&!t.oldValue?S(e,t):t.value&&t.oldValue?P(t.value)&&((e,t)=>{for(const n of Object.keys(t))$(t[n])&&(t[n].value=e[n])})(t.value,n.options):null==n||n.instance.close())},unmounted(e){var t;null==(t=e[N])||t.instance.close()}};export{q as v};
